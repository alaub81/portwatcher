# -------- .env.example (for Portwatcher) --------
# NOTE: Do NOT put inline comments after values (e.g. KEY=123  # bad).
# Use separate comment lines like this instead.

# --- Basics ---
PW_HOST=0.0.0.0
PW_PORT=1417
PW_MAX_CONCURRENCY=200
PW_LOG_LEVEL=INFO
# Optional banner text sent to clients (raw, no escape interpretation)
PW_BANNER=

# --- Ignore rules (healthchecks / local nets) ---
PW_NOTIFY_IGNORE_LOOPBACK=1
PW_LOG_IGNORE_SUPPRESSED=1
# PW_NOTIFY_IGNORE_PRIVATES=1
# PW_NOTIFY_IGNORE_CIDRS=172.24.0.0/16,::1/128

# --- Payload capture & display ---
PW_CAPTURE_PAYLOAD=1
PW_PROBE_MAX_BYTES=2048
PW_PROBE_TIMEOUT_MS=800
PW_PAYLOAD_IN_NOTIF=1
PW_PAYLOAD_MAX_CHARS=600
PW_PAYLOAD_MODE=auto          # allowed: auto|text|hex|base64
PW_PAYLOAD_STRIP_CONTROL=1
# PW_TLS_JA3=1

# --- Channels ---
PW_ENABLE_EMAIL=1
PW_ENABLE_PUSH=1

# --- SMTP (E-Mail) ---
PW_SMTP_SERVER=mx.example.org
PW_SMTP_PORT=587
PW_SMTP_STARTTLS=1
PW_SMTP_USER=user@example.org
PW_SMTP_PASS=CHANGE_ME_STRONG_PASSWORD
# Alternative: use a Docker secret instead of PW_SMTP_PASS
# PW_SMTP_PASS_FILE=/run/secrets/smtp_pass
PW_MAIL_FROM=portwatch@example.org
PW_MAIL_TO=you@example.org

# --- ntfy ---
PW_NTFY_SERVER=https://ntfy.sh
PW_NTFY_TOPIC=your-ntfy-topic
PW_NTFY_PRIORITY=5
PW_NTFY_TAGS=rotating_light,shield

# --- Geo (offline) ---
PW_GEOIP_CITY_DB=/usr/share/GeoIP/GeoLite2-City.mmdb
PW_GEOIP_ASN_DB=/usr/share/GeoIP/GeoLite2-ASN.mmdb

# --- Geo (online fallback) ---
PW_IPAPI_ENABLE=0
PW_IPAPI_BUDGET_PER_MIN=40

# --- rDNS ---
PW_RDNS_ENABLE=1
PW_RDNS_TIMEOUT=1.0

# --- Detail fields ---
PW_INCLUDE_CITY=1
PW_INCLUDE_COORDS=0
PW_LATLON_PRECISION=2

# --- Rate-limit & cache ---
PW_RL_COOLDOWN_S=1800
PW_RL_FORGET_S=86400
PW_CACHE_SIZE=20000

# --- Time ---
PW_TZ=Europe/Berlin
PW_TS_INCLUDE_UTC=0

# --- Optional: MaxMind-Download im Container (RUN_GEOIPUPDATE=1 einschalten) ---
RUN_GEOIPUPDATE=1
GEOIPUPDATE_ACCOUNT_ID=YOURID
GEOIPUPDATE_LICENSE_KEY=example_license_key_not_real
GEOIPUPDATE_EDITION_IDS=GeoLite2-City GeoLite2-ASN
